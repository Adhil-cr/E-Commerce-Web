{% extends 'base.html' %}
{% block title %} Home - E-Commerce {% endblock %}

{% block content %}

<!-- ===================== BANNER SECTION ========================== -->
<section style="width: 100%; display: flex; justify-content: center; margin-bottom: 40px; position: relative; padding-top: 40px; padding-bottom: 40px; background-color: #F3F4F6;">

    <div style="position: relative; width: 45%;">

        {% for s in banners %}
            <img src="{{ s.banner.url }}"
                class="banner-slide"
                style="
                    width: 100%;
                    border-radius: 16px;
                    display: {% if forloop.first %}block{% else %}none{% endif %};
                    box-shadow: 0 8px 20px rgba(0,0,0,0.18);
                ">
        {% endfor %}

        <!-- Left Button -->
        <button onclick="prevBanner()"
            style="
                position:absolute;
                left:20px;
                top:50%;
                transform:translateY(-50%);
                background:rgba(17,24,39,0.35);
                border:2px solid white;
                color:white;
                font-size:26px;
                padding:12px 16px;
                border-radius:50%;
                cursor:pointer;
                transition:0.3s;
                backdrop-filter:blur(6px);
            "
            onmouseover="this.style.background='rgba(17,24,39,0.65)'"
            onmouseout="this.style.background='rgba(17,24,39,0.35)'">
            ❮
        </button>

        <!-- Right Button -->
        <button onclick="nextBanner()"
            style="
                position:absolute;
                right:20px;
                top:50%;
                transform:translateY(-50%);
                background:rgba(17,24,39,0.35);
                border:2px solid white;
                color:white;
                font-size:26px;
                padding:12px 16px;
                border-radius:50%;
                cursor:pointer;
                transition:0.3s;
                backdrop-filter:blur(6px);
            "
            onmouseover="this.style.background='rgba(17,24,39,0.65)'"
            onmouseout="this.style.background='rgba(17,24,39,0.35)'">
            ❯
        </button>

    </div>
</section>

<script>
    let slideIndex = 0;
    const slides = document.getElementsByClassName("banner-slide");

    function showSlide(i) {
        for (let s of slides) s.style.display = "none";
        slides[i].style.display = "block";
    }

    function nextBanner() {
        slideIndex = (slideIndex + 1) % slides.length;
        showSlide(slideIndex);
    }

    function prevBanner() {
        slideIndex = (slideIndex - 1 + slides.length) % slides.length;
        showSlide(slideIndex);
    }
</script>

<!-- ===================== PRODUCT SECTION ========================== -->
<section style="padding: 50px; background-color: #F3F4F6;">

    <h2 style="
        margin-bottom: 30px; 
        font-size: 28px; 
        font-weight: 600;
        color: #111827;
    ">Latest Products</h2>

    <div style="
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
        gap: 30px;
    ">

        {% for product in products %}
        <div style="
            background: white;
            border-radius: 16px;
            padding: 20px;
            box-shadow: 0 6px 16px rgba(0,0,0,0.12);
            transition: 0.3s;
            cursor: pointer;
        " 
        onmouseover="this.style.transform='translateY(-8px)'; 
                     this.style.boxShadow='0 12px 25px rgba(0,0,0,0.20)'"
        onmouseout="this.style.transform='translateY(0)'; 
                    this.style.boxShadow='0 6px 16px rgba(0,0,0,0.12)'">

            <!-- Product Image -->
            <div style="
                width: 100%;
                height: 190px;
                border-radius: 12px;
                overflow: hidden;
                margin-bottom: 15px;
            ">
                <img src="{{ product.product_image.url }}" 
                    alt="{{ product.title }}"
                    style="
                        width:100%; 
                        height:100%; 
                        object-fit:cover;
                        transition:0.4s;
                    "
                    onmouseover="this.style.transform='scale(1.12)'"
                    onmouseout="this.style.transform='scale(1)'">
            </div>

            <!-- Title -->
            <h3 style="
                font-size: 18px;
                font-weight: 600;
                margin-bottom: 8px;
                color:#1F2937;
            ">{{ product.title }}</h3>

            <!-- Short Description -->
            <p style="
                font-size: 14px;
                color:#6B7280;
                margin-bottom: 12px;
                line-height: 1.4;
            ">
                {{ product.description|slice:":60" }}...
            </p>

            <!-- Price -->
            <p style="
                font-size: 20px;
                font-weight: 700;
                color:#111827;
                margin-bottom: 18px;
            ">
                ₹ {{ product.price }}
            </p>

            <!-- View Product Button -->
            <a href="/products/{{ product.id }}/"
                style="
                    display: block;
                    text-align:center;
                    padding:12px; 
                    background:#2563EB; 
                    color:white; 
                    text-decoration:none; 
                    border-radius:8px; 
                    font-size:15px;
                    transition:0.3s;
                    font-weight:500;
                "
                onmouseover="this.style.background='#1E40AF'"
                onmouseout="this.style.background='#2563EB'">
                View Product
            </a>

        </div>
        {% endfor %}

    </div>
</section>

{% endblock %}


