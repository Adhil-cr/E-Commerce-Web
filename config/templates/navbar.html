<nav style="
    padding: 14px 40px;
    background: #0f172a;
    color: white;
    display: flex;
    justify-content: space-between;
    align-items: center;
    position: sticky;
    top: 0;
    z-index: 999;
    box-shadow: 0 4px 20px rgba(0,0,0,0.25);
">

    <!-- LOGO -->
        <a href="" 
        style="color:white; font-size:22px; font-weight:700; text-decoration:none;">
        TechHive
        </a>

    <!-- NAV ICONS -->
    <div style="display:flex; gap: 28px; align-items:center;">

        <!-- HOME ICON -->
        {% if user.is_authenticated %}
            <a href="/" title="Home"
                style="color:#e2e8f0; text-decoration:none; padding:8px; border-radius:6px; transition:0.3s;"
                onmouseover="this.style.background='rgba(255,255,255,0.08)'"
                onmouseout="this.style.background='transparent'">

                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none"
                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M3 10L12 3l9 7"/>
                <path d="M5 10v10h14V10"/>
                </svg>
                
            </a>
        {% endif %}

        <!-- PRODUCTS ICON -->
        {% if user.is_authenticated %}
            <a href="{% url 'product_list' %}" title="Product List"
                style="color:#e2e8f0; text-decoration:none; padding:8px; border-radius:6px; transition:0.3s;"
                onmouseover="this.style.background='rgba(255,255,255,0.08)'"
                onmouseout="this.style.background='transparent'">

                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-box">
                <path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z"/>
                <path d="M3.27 6.96 12 12.01l8.73-5.05"/>
                <path d="M12 22.08V12"/>
                </svg>

            </a>
        {% endif %}
        
        
        <!-- Add products (for admin) -->
        {% if user.is_authenticated and user.is_staff %}
            <a href="{% url 'product_add' %}" title="Add products"
                style="color:#e2e8f0; text-decoration:none; padding:8px; border-radius:6px; transition:0.3s;"
                onmouseover="this.style.background='rgba(255,255,255,0.08)'"
                onmouseout="this.style.background='transparent'">

                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <circle cx="12" cy="12" r="10"/>
                    <line x1="12" y1="8" x2="12" y2="16"/>
                    <line x1="8" y1="12" x2="16" y2="12"/>
                </svg>

            </a>
        {% endif %}

        <!-- My order icon -->
        {% if user.is_authenticated and not user.is_staff %}
            <a href="{% url 'my_orders' %}"
            style="
                    color:white;
                    padding:8px;
                    display:flex;
                    align-items:center;
                    justify-content:center;
                    border-radius:8px;
                    position:relative;
                    transition:0.25s;
            "
            onmouseover="this.style.background='rgba(255,255,255,0.12)'"
            onmouseout="this.style.background='transparent'">

                <!-- Orders Icon -->
                <svg xmlns='http://www.w3.org/2000/svg'
                    fill='none'
                    viewBox='0 0 24 24'
                    stroke-width='1.8'
                    stroke='currentColor'
                    style="width:22px; height:22px;">
                    <path stroke-linecap='round' stroke-linejoin='round'
                        d='M3 7v10a2 2 0 002 2h14a2 2 0 002-2V7m-18 0l2-2h12l2 2m-16 0h18m-14 4h10m-10 4h7' />
                </svg>

                <!-- Tooltip -->
                <span style="
                    visibility:hidden;
                    opacity:0;
                    background:black;
                    color:white;
                    font-size:12px;
                    padding:4px 8px;
                    border-radius:6px;
                    position:absolute;
                    bottom:-28px;
                    white-space:nowrap;
                    transition:0.25s;
                    left:50%;
                    transform:translateX(-50%);
                ">My Orders</span>

            </a>

            <!-- Tooltip script -->
            <script>
            document.querySelectorAll('a[href="{% url "my_orders" %}"]').forEach(btn => {
                btn.addEventListener("mouseenter", () => {
                    const tip = btn.querySelector("span");
                    tip.style.visibility = "visible";
                    tip.style.opacity = "1";
                });
                btn.addEventListener("mouseleave", () => {
                    const tip = btn.querySelector("span");
                    tip.style.opacity = "0";
                    tip.style.visibility = "hidden";
                });
            });
            </script>
        {% endif %}

        
        <!-- CART ICON WITH BADGE -->
        {% if user.is_authenticated and not user.is_staff %}
        
            <a href="{% url 'cart' %}" title="Cart"
                style="color:#e2e8f0; text-decoration:none; padding:8px; border-radius:6px; position:relative; transition:0.3s;"
                onmouseover="this.style.background='rgba(255,255,255,0.08)'"
                onmouseout="this.style.background='transparent'">
                
                <!-- SVG ICON -->
                <svg xmlns="http://www.w3.org/2000/svg" 
                    fill="none" viewBox="0 0 24 24" stroke-width="2" 
                    stroke="currentColor" style="width:22px; height:22px;">
                    <path stroke-linecap="round" stroke-linejoin="round" 
                        d="M3 3h2l3.6 12.59A2 2 0 0 0 10.5 17h7a2 2 0 0 0 1.9-1.41L21 9H7" />
                    <circle cx="9" cy="21" r="1" />
                    <circle cx="19" cy="21" r="1" />
                </svg>
            
                <!-- CART COUNT BADGE -->
                {% if user.is_authenticated and cart_count > 0 %}
                <span style="
                    position:absolute;
                    top:2px;
                    right:2px;
                    background:#ef4444;
                    color:white;
                    padding:2px 6px;
                    font-size:11px;
                    font-weight:600;
                    border-radius:50%;
                    line-height:1;
                ">
                    {{ cart_count }}
                </span>
                {% endif %}
            
            </a>
        
        {% endif %} 

        <!-- Orders list -->
        {% if user.is_staff %}
            <a href="{% url 'admin_orders' %}"
            style="
                    color:white;
                    padding:8px;
                    display:flex;
                    align-items:center;
                    justify-content:center;
                    border-radius:8px;
                    position:relative;
                    transition:0.25s;
            "
            onmouseover="this.style.background='rgba(255,255,255,0.12)'"
            onmouseout="this.style.background='transparent'">

                <!-- Admin Orders Icon -->
                <svg xmlns="http://www.w3.org/2000/svg" 
                    fill="none" 
                    viewBox="0 0 24 24" 
                    stroke-width="1.8" 
                    stroke="currentColor"
                    style="width:23px; height:23px;">
                    <path stroke-linecap="round" stroke-linejoin="round"
                        d="M9 12h6m-6 4h6m3 5H6a2 2 0 01-2-2V5a2 
                            2 0 012-2h3l1 2h4l1-2h3a2 2 0 012 2v14a2 
                               2 0 01-2 2z" />
                </svg>

                <!-- Tooltip -->
                <span style="
                    visibility:hidden;
                    opacity:0;
                    background:black;
                    color:white;
                    font-size:12px;
                    padding:4px 8px;
                    border-radius:6px;
                    position:absolute;
                    bottom:-28px;
                    white-space:nowrap;
                    transition:0.25s;
                    left:50%;
                    transform:translateX(-50%);
                ">
                   Manage Orders
                </span>

            </a>

            <!-- Tooltip Script -->
            <script>
            document.addEventListener("DOMContentLoaded", () => {
                document.querySelectorAll('a[href="{% url "admin_orders" %}"]').forEach(btn => {
                    btn.addEventListener("mouseenter", () => {
                        let tip = btn.querySelector("span");
                        tip.style.visibility = "visible";
                        tip.style.opacity = "1";
                    });
                    btn.addEventListener("mouseleave", () => {
                        let tip = btn.querySelector("span");
                        tip.style.opacity = "0";
                        tip.style.visibility = "hidden";
                    });
                });
            });
            </script>

        {% endif %}
       

        <!-- Admin Status icon -->
        {% if user.is_staff %}
            <span style="
                padding: 4px 10px;
                background: #16A34A;   /* green */
                color: white;
                font-size: 12px;
                font-weight: 600;
                border-radius: 999px;
                box-shadow: 0 2px 6px rgba(22,163,74,0.35);
                margin-right: 10px;
            ">
                ● Admin
            </span>
        {% endif %}



            
        {% if request.user.is_authenticated %}

        <!-- ================= PROFILE DROPDOWN ================= -->
        <div style="position:relative;">

            <!-- BUTTON -->
            <button onclick="toggleDropdown()" 
                style="
                    background:none;
                    border:none;
                    color:#e2e8f0;
                    font-size:15px;
                    display:flex;
                    align-items:center;
                    gap:6px;
                    cursor:pointer;
                    padding:8px 12px;
                    border-radius:6px;
                "
                onmouseover="this.style.background='rgba(255,255,255,0.08)'"
                onmouseout="this.style.background='transparent'">

                <svg xmlns="http://www.w3.org/2000/svg"
                     fill="none" viewBox="0 0 24 24" stroke-width="2"
                     stroke="currentColor" style="width:20px;height:20px;">
                    <path stroke-linecap="round" stroke-linejoin="round"
                        d="M15 21H9a2 2 0 01-2-2v-1a6 6 0 0112 0v1a2 2 0 01-2 2zM12 11a4 4 0 100-8 4 4 0 000 8z" />
                </svg>

                {{ customer.name }}
                <span style="font-size:12px;">▼</span>
            </button>

            <!-- MENU -->
            <div id="dropdownMenu" 
                 style="
                    position:absolute;
                    top:45px;
                    right:0;
                    background:white;
                    width:170px;
                    border-radius:12px;
                    box-shadow:0 8px 25px rgba(0,0,0,0.25);
                    display:none;
                    padding:8px 0;
                 ">
                <a href="/customers/logout/"
                    style="padding:12px 18px; display:block; text-decoration:none; color:#DC2626;"
                    onmouseover="this.style.background='#FEE2E2'"
                    onmouseout="this.style.background='transparent'">
                    Logout
                </a>
            </div>
        </div>

        {% else %}

        <!-- LOGIN -->
        <a href="/customers/login/" 
            style="color:#e2e8f0; text-decoration:none; padding:8px 10px; border-radius:6px;"
            onmouseover="this.style.background='rgba(255,255,255,0.08)'"
            onmouseout="this.style.background='transparent'">
            Login
        </a>

        <!-- SIGNUP -->
        <a href="/customers/signup/"
           style="
                padding: 8px 18px;
                background:#2563EB;
                color:white;
                border-radius:8px;
                text-decoration:none;
                font-weight:500;
           "
           onmouseover="this.style.background='#1D4ED8'"
           onmouseout="this.style.background='#2563EB'">
           Signup
        </a>

        {% endif %}
    </div>
</nav>

<!-- SCRIPT FOR DROPDOWN -->
<script>
function toggleDropdown() {
    var menu = document.getElementById("dropdownMenu");
    menu.style.display = (menu.style.display === "block") ? "none" : "block";
}
document.addEventListener("click", function(e) {
    var menu = document.getElementById("dropdownMenu");
    if (!e.target.closest("button") && !e.target.closest("#dropdownMenu")) {
        menu.style.display = "none";
    }
});
</script>
